#!/bin/zsh
#
# name:          init-stack-haskell-project.zsh
# version:       see VERSION.md
# synopsis:      initializes a `stack` project for `Haskell`.
# license:       BSD3
# license-file:  LICENSE.md
# author:        art rimbaud
# maintainer:    rimbaudcode[at]gmail(DoT)com
# copyright:     (c) 2016 rimbaudcode
# category:      Programming

local REQUIRED_ARGC=2
local USAGE="Usage: init-stack-haskell-project PROJECT_NAME STACK_TEMPLATE_NAME"

if (( $# != REQUIRED_ARGC )); then
    echo $USAGE
    exit 1
fi

local PROJECT_NAME=$1
local STACK_TEMPLATE_NAME=$2

stack update
stack new $PROJECT_NAME $STACK_TEMPLATE_NAME

cd $PROJECT_NAME
git init
wget https://raw.githubusercontent.com/github/gitignore/master/Haskell.gitignore -O .gitignore
git add .gitignore
git commit -am "github's .gitignore added"
mv LICENSE LICENSE.md
git add LICENSE.md
git commit -am 'BSD3 LICENSE.md added'
touch CHANGELOG.md README.md TODO.org
git add CHANGELOG.md README.md TODO.org
git commit -am 'CHANGELOG.md, README.md, and TODO.org added'
hasktags -e . > TAGS
git add TAGS
git commit -am 'emacs hasktags generated and added'
mkdir -p reps
git add .
git commit -am 'dir for holding reports,`reps`, made and added'
git add .
git commit -am 'project config files (stack generated files) added'
git flow init -d
git commit -am 'git-flow ran and in force'
